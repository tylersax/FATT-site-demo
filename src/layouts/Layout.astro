---
export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="FATT Organization - Static Site" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href={import.meta.env.BASE_URL + "favicon.svg"} />
    <title>{title}</title>
  </head>
  <body>
    <slot />
    
    <script>
      // Intersection Observer for scroll animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-in');
          }
        });
      }, observerOptions);

      // Observe all elements with animation classes
      document.addEventListener('DOMContentLoaded', () => {
        const animatedElements = document.querySelectorAll('.animate-on-scroll');
        animatedElements.forEach(el => observer.observe(el));
      });

      // Smooth scroll for navigation links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });

      // Parallax and sticky title effects
      function handleParallax() {
        const heroSection = document.querySelector('#home section');
        const heroContent = document.getElementById('hero-content');
        const clouds = document.getElementById('clouds');
        
        if (!heroSection || !heroContent || !clouds) return;

        const scrollY = window.scrollY;
        const heroHeight = heroSection.offsetHeight;
        const viewportHeight = window.innerHeight;
        
        // Calculate when hero section ends
        const heroEndPoint = heroHeight - viewportHeight;
        
        if (scrollY <= heroEndPoint) {
          // Keep title fixed in viewport center
          heroContent.style.position = 'fixed';
          heroContent.style.top = '50%';
          heroContent.style.left = '50%';
          heroContent.style.transform = 'translate(-50%, -50%)';
          
          // Parallax clouds - move slower than scroll
          const parallaxSpeed = 0.5;
          clouds.style.transform = `translateY(${scrollY * parallaxSpeed}px)`;
        } else {
          // Stick title to the point where it would naturally be when section ends
          heroContent.style.position = 'absolute';
          heroContent.style.top = '75%';
          heroContent.style.left = '50%';
          heroContent.style.transform = 'translate(-50%, -50%)';
          
          // Keep clouds at final position
          clouds.style.transform = `translateY(${heroEndPoint * 0.5}px)`;
        }
      }

      // Add scroll listener
      window.addEventListener('scroll', handleParallax);
      window.addEventListener('resize', handleParallax);
      
      // Initial call
      handleParallax();
    </script>

    <style>
      /* Custom scroll animation styles */
      .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease-out;
      }

      .animate-on-scroll.animate-in {
        opacity: 1;
        transform: translateY(0);
      }

      .animate-on-scroll.slide-left {
        transform: translateX(-30px);
      }

      .animate-on-scroll.slide-left.animate-in {
        transform: translateX(0);
      }

      .animate-on-scroll.slide-right {
        transform: translateX(30px);
      }

      .animate-on-scroll.slide-right.animate-in {
        transform: translateX(0);
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Twinkling Stars - Global styles */
      :global(.star) {
        position: absolute;
        width: 4px;
        height: 4px;
        background: white;
        border-radius: 50%;
        opacity: 0.8;
        animation: twinkle 2s infinite;
        box-shadow: 0 0 8px rgba(255, 255, 255, 0.9);
        z-index: 1;
      }

      @keyframes twinkle {
        0% { opacity: 0.4; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
        100% { opacity: 0.4; transform: scale(1); }
      }

      /* Individual star positions and animation delays */
      :global(.star-1) { top: 15%; left: 10%; animation-delay: 0s; }
      :global(.star-2) { top: 25%; left: 85%; animation-delay: 0.5s; }
      :global(.star-3) { top: 35%; left: 20%; animation-delay: 1s; }
      :global(.star-4) { top: 45%; left: 70%; animation-delay: 1.5s; }
      :global(.star-5) { top: 55%; left: 15%; animation-delay: 2s; }
      :global(.star-6) { top: 65%; left: 80%; animation-delay: 2.5s; }
      :global(.star-7) { top: 75%; left: 35%; animation-delay: 0.3s; }
      :global(.star-8) { top: 85%; left: 60%; animation-delay: 0.8s; }
      :global(.star-9) { top: 20%; left: 50%; animation-delay: 1.3s; }
      :global(.star-10) { top: 40%; left: 90%; animation-delay: 1.8s; }
      :global(.star-11) { top: 60%; left: 5%; animation-delay: 2.3s; }
      :global(.star-12) { top: 80%; left: 25%; animation-delay: 0.1s; }
      :global(.star-13) { top: 30%; left: 65%; animation-delay: 0.6s; }
      :global(.star-14) { top: 50%; left: 40%; animation-delay: 1.1s; }
      :global(.star-15) { top: 70%; left: 95%; animation-delay: 1.6s; }
      :global(.star-16) { top: 10%; left: 75%; animation-delay: 2.1s; }
      :global(.star-17) { top: 90%; left: 45%; animation-delay: 0.4s; }
      :global(.star-18) { top: 35%; left: 30%; animation-delay: 0.9s; }
      :global(.star-19) { top: 55%; left: 85%; animation-delay: 1.4s; }
      :global(.star-20) { top: 75%; left: 10%; animation-delay: 1.9s; }
      
      /* Contact Section Stars */
      :global(.star-21) { top: 10%; left: 15%; animation-delay: 0.2s; }
      :global(.star-22) { top: 20%; left: 75%; animation-delay: 0.7s; }
      :global(.star-23) { top: 30%; left: 25%; animation-delay: 1.2s; }
      :global(.star-24) { top: 40%; left: 85%; animation-delay: 1.7s; }
      :global(.star-25) { top: 50%; left: 10%; animation-delay: 2.2s; }
      :global(.star-26) { top: 60%; left: 60%; animation-delay: 0.4s; }
      :global(.star-27) { top: 70%; left: 30%; animation-delay: 0.9s; }
      :global(.star-28) { top: 80%; left: 90%; animation-delay: 1.4s; }
      :global(.star-29) { top: 90%; left: 40%; animation-delay: 1.9s; }
      :global(.star-30) { top: 15%; left: 50%; animation-delay: 0.1s; }
      :global(.star-31) { top: 35%; left: 80%; animation-delay: 0.6s; }
      :global(.star-32) { top: 55%; left: 20%; animation-delay: 1.1s; }
      :global(.star-33) { top: 75%; left: 70%; animation-delay: 1.6s; }
      :global(.star-34) { top: 25%; left: 45%; animation-delay: 2.1s; }
      :global(.star-35) { top: 65%; left: 5%; animation-delay: 0.3s; }

      /* Horizontal Scrolling Styles */
      .scrollbar-hide {
        -ms-overflow-style: none;  /* Internet Explorer 10+ */
        scrollbar-width: none;  /* Firefox */
      }
      .scrollbar-hide::-webkit-scrollbar { 
        display: none;  /* Safari and Chrome */
      }
    </style>
  </body>
</html>

